{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport { createServer } from \"miragejs\";\n\nvar db = require(\"../Data/db\");\n\nimport * as firebase from 'firebase';\nexport function makeServer() {\n  if (window.server) {\n    server.shutdown();\n  }\n\n  window.server = createServer({\n    routes: function routes() {\n      this.get(\"/api/employees\", function _callee(schema, request) {\n        return _regeneratorRuntime.async(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", db);\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      });\n      this.post(\"/api/employees/create\", function (schema, request) {\n        console.log(\"/api/employees/create\");\n        var newEmployee = JSON.parse(request.requestBody);\n        var employeeExist = db.employees.find(function (employee) {\n          return employee.id == newEmployee.id;\n        });\n\n        if (!employeeExist) {\n          console.log(\"new DB\", db);\n          return {\n            status: \"success\",\n            data: newEmployee\n          };\n        } else {\n          res.status(400).send(\"Employee exist\");\n        }\n      });\n      this.post(\"/api/employees/delete\", function (schema, request) {\n        var newEmployee = JSON.parse(request.requestBody);\n        var employeeExist = db.employees.find(function (employee) {\n          return employee.id == newEmployee.id;\n        });\n\n        if (!employeeExist) {\n          db.employees.push(newEmployee);\n          res.status(200).send(newEmployee);\n        } else {\n          res.status(400).send(\"Employee exist\");\n        }\n      });\n      this.post(\"/api/employees/update\", function (schema, request) {\n        var newEmployee = JSON.parse(request.requestBody);\n        var employeeExist = db.employees.find(function (employee) {\n          return employee.id == newEmployee.id;\n        });\n\n        if (!employeeExist) {\n          db.employees.push(newEmployee);\n          res.status(200).send(newEmployee);\n        } else {\n          res.status(400).send(\"Employee exist\");\n        }\n      });\n      this.get(\"/api/signup\", function _callee2(schema, request) {\n        var email, password, resData;\n        return _regeneratorRuntime.async(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                email = \"MMMMMMMM@z.com\";\n                password = \"MMMMMMMMM@z.com\";\n                _context2.next = 4;\n                return _regeneratorRuntime.awrap(firebase.auth().createUserWithEmailAndPassword(email, password).then(function (user) {\n                  console.log(\"SignupUser\", user);\n                  return user;\n                }).catch(function (error) {\n                  var errorCode = error.code;\n                  var errorMessage = error.message;\n                  throw error;\n                }));\n\n              case 4:\n                resData = _context2.sent;\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, null, null, null, Promise);\n      });\n    }\n  });\n  return window.server;\n}","map":{"version":3,"sources":["C:/Users/User/Documents/EmployeeManagement/server/serverMirage.js"],"names":["createServer","db","require","firebase","makeServer","window","server","shutdown","routes","get","schema","request","post","console","log","newEmployee","JSON","parse","requestBody","employeeExist","employees","find","employee","id","status","data","res","send","push","email","password","auth","createUserWithEmailAndPassword","then","user","catch","error","errorCode","code","errorMessage","message","resData"],"mappings":"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","sourcesContent":["\r\nimport { createServer } from \"miragejs\"\r\nconst db = require('../Data/db');\r\n// var defaultDatabase = firebase.database();\r\nimport * as firebase from 'firebase';\r\n// import config from '.././src/config';\r\n\r\n\r\nexport function makeServer() {\r\n    if (window.server) {\r\n        server.shutdown()\r\n    }\r\n\r\n    // if (!firebase.apps.length) {\r\n    //     console.log(\"firebase.initializeApp\");\r\n    //     firebase.initializeApp(config.firebaseConfig);\r\n    // }\r\n\r\n    //miragejs\r\n    window.server = createServer({\r\n\r\n        routes() {\r\n            this.get(\"/api/employees\", async(schema, request) => {\r\n                return db;\r\n            });\r\n\r\n            this.post(\"/api/employees/create\", (schema, request) => {\r\n                console.log(\"/api/employees/create\");\r\n                const newEmployee = JSON.parse(request.requestBody);\r\n\r\n                // TODO: add to firebase DB\r\n                const employeeExist = db.employees.find(employee => employee.id == newEmployee.id);\r\n                if (!employeeExist) {\r\n                    // db.employees.push(newEmployee);\r\n                    // res.status(200).send(newEmployee);\r\n                    console.log(\"new DB\", db);\r\n                    return {\r\n                        status: \"success\",\r\n                        data: newEmployee\r\n                    };\r\n                }\r\n                else { // empolyee exsist\r\n                    res.status(400).send(\"Employee exist\");\r\n                }\r\n                // return schema.users.create(attrs);\r\n            });\r\n\r\n            this.post(\"/api/employees/delete\", (schema, request) => {\r\n                const newEmployee = JSON.parse(request.requestBody);\r\n                const employeeExist = db.employees.find(employee => employee.id == newEmployee.id);\r\n                if (!employeeExist) {\r\n                    db.employees.push(newEmployee);\r\n                    res.status(200).send(newEmployee);\r\n                }\r\n                else { // empolyee exsist\r\n                    res.status(400).send(\"Employee exist\");\r\n                }\r\n                // return schema.users.create(attrs);\r\n            });\r\n\r\n            this.post(\"/api/employees/update\", (schema, request) => {\r\n                const newEmployee = JSON.parse(request.requestBody);\r\n                const employeeExist = db.employees.find(employee => employee.id == newEmployee.id);\r\n                if (!employeeExist) {\r\n                    db.employees.push(newEmployee);\r\n                    res.status(200).send(newEmployee);\r\n                }\r\n                else { // empolyee exsist\r\n                    res.status(400).send(\"Employee exist\");\r\n                }\r\n                // return schema.users.create(attrs);\r\n            });\r\n\r\n\r\n            // firebase\r\n            this.get(\"/api/signup\", async(schema, request) => {\r\n                let email = \"MMMMMMMM@z.com\";\r\n                let password = \"MMMMMMMMM@z.com\"\r\n                const resData = await firebase.auth().createUserWithEmailAndPassword(email, password)\r\n                // console.log(resData);\r\n                    .then((user) => {\r\n                        console.log(\"SignupUser\", user);\r\n                        // setCurrentUserId(user.uid);\r\n                        return user;\r\n                    })\r\n                    .catch((error) => {\r\n                        var errorCode = error.code;\r\n                        var errorMessage = error.message;\r\n                        throw error;\r\n                    });\r\n\r\n            });\r\n\r\n        },\r\n    })\r\n    return window.server;\r\n}"]},"metadata":{},"sourceType":"module"}