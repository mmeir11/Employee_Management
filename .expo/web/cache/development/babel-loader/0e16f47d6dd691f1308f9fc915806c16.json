{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\User\\\\Documents\\\\EmployeeManagement\\\\screens\\\\LoginScreen.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport * as firebase from 'firebase';\nimport ExpoStatusBar from 'expo-status-bar/build/ExpoStatusBar';\nimport * as Facebook from 'expo-facebook';\nimport Colors from \"../constant/Colors\";\n\nvar LoginScreen = function LoginScreen(props) {\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(''),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      currentUserId = _useState6[0],\n      setCurrentUserId = _useState6[1];\n\n  useEffect(function () {\n    Facebook.initializeAsync({\n      appId: '1328577777474619',\n      appName: 'EmployeeManagment'\n    });\n    firebase.auth().onAuthStateChanged(function (user) {\n      if (user != null) {\n        props.navigation.navigate('ManagementEmployeeScreen');\n      }\n    });\n  }, []);\n\n  var SignupUser = function SignupUser(email, password) {\n    return _regeneratorRuntime.async(function SignupUser$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(firebase.auth().createUserWithEmailAndPassword(email, password).then(function (user) {\n              console.log(\"SignupUser\", user);\n              setCurrentUserId(user.uid);\n            }).catch(function (error) {\n              var errorCode = error.code;\n              var errorMessage = error.message;\n              throw error;\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var signupHandler = function signupHandler() {\n    return _regeneratorRuntime.async(function signupHandler$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(SignupUser(email, password));\n\n          case 3:\n            _context2.next = 9;\n            break;\n\n          case 5:\n            _context2.prev = 5;\n            _context2.t0 = _context2[\"catch\"](0);\n            signoutUser();\n            return _context2.abrupt(\"return\", Alert.alert('שגיאת התחברות', _context2.t0.message, [{\n              text: \"אישור\"\n            }], {\n              cancelable: true\n            }));\n\n          case 9:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  };\n\n  var SigninUser = function SigninUser(email, password) {\n    return _regeneratorRuntime.async(function SigninUser$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return _regeneratorRuntime.awrap(firebase.auth().signInWithEmailAndPassword(email, password).then(function (res) {\n              console.log(\"Signin succuss\");\n              var userUid = res.user.uid;\n              setCurrentUserId(userUid);\n            }).catch(function (error) {\n              var errorCode = error.code;\n              var errorMessage = error.message;\n              throw error;\n            }));\n\n          case 2:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var loginHandler = function loginHandler() {\n    return _regeneratorRuntime.async(function loginHandler$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return _regeneratorRuntime.awrap(SigninUser(email, password));\n\n          case 3:\n            _context4.next = 9;\n            break;\n\n          case 5:\n            _context4.prev = 5;\n            _context4.t0 = _context4[\"catch\"](0);\n            signoutUser();\n            return _context4.abrupt(\"return\", Alert.alert('שגיאת התחברות', _context4.t0.message, [{\n              text: \"אישור\"\n            }], {\n              cancelable: true\n            }));\n\n          case 9:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  };\n\n  var facebookLoginHandler = function facebookLoginHandler() {\n    var _await$Facebook$logIn, type, token, credential;\n\n    return _regeneratorRuntime.async(function facebookLoginHandler$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return _regeneratorRuntime.awrap(Facebook.logInWithReadPermissionsAsync({\n              permission: \"public_profile\"\n            }));\n\n          case 2:\n            _await$Facebook$logIn = _context5.sent;\n            type = _await$Facebook$logIn.type;\n            token = _await$Facebook$logIn.token;\n\n            if (!(type == 'succuss')) {\n              _context5.next = 9;\n              break;\n            }\n\n            credential = new firebase.auth.FacebookAuthProvider().credential(token);\n            _context5.next = 9;\n            return _regeneratorRuntime.awrap(firebase.auth().signInWithCredential(credential).catch(function (error) {\n              console.log(\"error\", error);\n            }));\n\n          case 9:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var signoutUser = function signoutUser() {\n    return _regeneratorRuntime.async(function signoutUser$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            firebase.auth().signOut().then(function () {\n              console.log(\"signout succuss\");\n            }).catch(function (error) {\n              console.log(\"signout fail\");\n            });\n\n          case 1:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  return React.createElement(Pressable, {\n    style: styles.root,\n    onPress: function onPress() {\n      return Keyboard.dismiss();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.inputContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.title,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, \"Login/Sign Up\"), React.createElement(TextInput, {\n    placeholder: \"Email\",\n    onChangeText: function onChangeText(text) {\n      return setEmail(text);\n    },\n    keyboardType: \"email-address\",\n    style: styles.inputText,\n    autoCapitalize: \"none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }), React.createElement(TextInput, {\n    placeholder: \"Password\",\n    onChangeText: function onChangeText(text) {\n      return setPassword(text);\n    },\n    secureTextEntry: true,\n    style: styles.inputText,\n    autoCapitalize: \"none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 17\n    }\n  }), React.createElement(TouchableOpacity, {\n    onPress: loginHandler,\n    style: styles.BtnLogin,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, \"Login\")), React.createElement(TouchableOpacity, {\n    onPress: signupHandler,\n    style: _objectSpread(_objectSpread({}, styles.BtnLogin), {}, {\n      backgroundColor: '#e9ecef'\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }, \"Sign up\")), React.createElement(TouchableOpacity, {\n    onPress: facebookLoginHandler,\n    style: _objectSpread(_objectSpread({}, styles.BtnLogin), {}, {\n      backgroundColor: '#3b5998'\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }, \"Sign in with Facebook\"))));\n};\n\nvar styles = StyleSheet.create({\n  root: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    backgroundColor: Colors.primary\n  },\n  inputContainer: {\n    width: '80%',\n    height: '60%',\n    alignContent: 'center',\n    alignSelf: 'center',\n    justifyContent: 'center',\n    alignItems: 'center',\n    borderWidth: 2,\n    borderRadius: 10,\n    borderColor: Colors.lightGray,\n    backgroundColor: Colors.lightGray\n  },\n  title: {\n    fontSize: 20,\n    padding: 4,\n    marginBottom: 30,\n    fontWeight: 'bold'\n  },\n  inputText: {\n    width: '85%',\n    height: 40,\n    backgroundColor: Colors.white,\n    borderRadius: 20,\n    margin: 5,\n    textAlign: 'center'\n  },\n  BtnLogin: {\n    width: '60%',\n    padding: 8,\n    borderRadius: 8,\n    borderWidth: 1,\n    borderColor: Colors.lightGray,\n    alignItems: 'center',\n    backgroundColor: Colors.offright,\n    margin: 3\n  }\n});\nexport default LoginScreen;","map":{"version":3,"sources":["C:/Users/User/Documents/EmployeeManagement/screens/LoginScreen.js"],"names":["React","useState","useEffect","firebase","ExpoStatusBar","Facebook","Colors","LoginScreen","props","email","setEmail","password","setPassword","currentUserId","setCurrentUserId","initializeAsync","appId","appName","auth","onAuthStateChanged","user","navigation","navigate","SignupUser","createUserWithEmailAndPassword","then","console","log","uid","catch","error","errorCode","code","errorMessage","message","signupHandler","signoutUser","Alert","alert","text","cancelable","SigninUser","signInWithEmailAndPassword","res","userUid","loginHandler","facebookLoginHandler","logInWithReadPermissionsAsync","permission","type","token","credential","FacebookAuthProvider","signInWithCredential","signOut","styles","root","Keyboard","dismiss","inputContainer","title","inputText","BtnLogin","backgroundColor","color","StyleSheet","create","flex","alignItems","justifyContent","primary","width","height","alignContent","alignSelf","borderWidth","borderRadius","borderColor","lightGray","fontSize","padding","marginBottom","fontWeight","white","margin","textAlign","offright"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { View, Text, StyleSheet, TextInput, Button, Pressable, Keyboard, Alert, TouchableOpacity } from 'react-native';\r\nimport * as firebase from 'firebase';\r\nimport ExpoStatusBar from 'expo-status-bar/build/ExpoStatusBar';\r\nimport * as Facebook from 'expo-facebook';\r\nimport Colors from '../constant/Colors';\r\n\r\nconst LoginScreen = props => {\r\n\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [currentUserId, setCurrentUserId] = useState('');\r\n\r\n    useEffect(() => {\r\n        Facebook.initializeAsync({ appId: '1328577777474619', appName: 'EmployeeManagment' });\r\n\r\n        firebase.auth().onAuthStateChanged((user => {\r\n            // console.log(\"on change User\", user);\r\n            if (user != null) {\r\n                props.navigation.navigate('ManagementEmployeeScreen');\r\n            }\r\n        }));\r\n    }, [])\r\n\r\n    const SignupUser = async (email, password) => {\r\n        await firebase.auth().createUserWithEmailAndPassword(email, password)\r\n            .then((user) => {\r\n                console.log(\"SignupUser\", user);\r\n                setCurrentUserId(user.uid);\r\n            })\r\n            .catch((error) => {\r\n                var errorCode = error.code;\r\n                var errorMessage = error.message;\r\n                throw error;\r\n            });\r\n    }\r\n\r\n    const signupHandler = async () => {\r\n        try {\r\n\r\n            //Signup\r\n            await SignupUser(email, password);\r\n        }\r\n        catch (error) {\r\n            signoutUser();\r\n            return Alert.alert(\r\n                'שגיאת התחברות',\r\n                error.message,\r\n                [\r\n                    { text: \"אישור\" }\r\n                ],\r\n                { cancelable: true }\r\n            );\r\n        }\r\n    }\r\n\r\n    const SigninUser = async (email, password) => {\r\n        await firebase.auth().signInWithEmailAndPassword(email, password)\r\n            .then((res) => {\r\n                console.log(\"Signin succuss\");\r\n                let userUid = res.user.uid;\r\n                setCurrentUserId(userUid);\r\n\r\n            })\r\n            .catch((error) => {\r\n                var errorCode = error.code;\r\n                var errorMessage = error.message;\r\n                // setError(errorMessage);\r\n                throw error;\r\n            });\r\n    }\r\n\r\n    const loginHandler = async () => {\r\n        try {\r\n            await SigninUser(email, password);\r\n\r\n        } catch (error) {\r\n            signoutUser();\r\n            return Alert.alert(\r\n                'שגיאת התחברות',\r\n                error.message,\r\n                [\r\n                    { text: \"אישור\" }\r\n                ],\r\n                { cancelable: true }\r\n            );\r\n        }\r\n    }\r\n\r\n    const facebookLoginHandler = async () => {\r\n\r\n        const { type, token } = await\r\n            Facebook.logInWithReadPermissionsAsync(\r\n                {\r\n                    permission: \"public_profile\"\r\n                }\r\n            );\r\n\r\n        if (type == 'succuss') {\r\n            const credential = new firebase.auth.FacebookAuthProvider().credential(token);\r\n\r\n            await firebase.auth().signInWithCredential(credential).catch((error) => {\r\n                console.log(\"error\", error);\r\n            })\r\n            // firebase\r\n            //     .auth()\r\n            //     .signInWithPopup(provider)\r\n            //     .then((result) => {\r\n            //         var credential = result.credential;\r\n\r\n            //         // The signed-in user info.\r\n            //         var user = result.user;\r\n\r\n            //         // This gives you a Facebook Access Token. You can use it to access the Facebook API.\r\n            //         var accessToken = credential.accessToken;\r\n\r\n            //         // ...\r\n            //         console.log(\"facebookLoginHandler succuss\", user);\r\n            //     })\r\n            //     .catch((error) => {\r\n            //         // Handle Errors here.\r\n            //         var errorCode = error.code;\r\n            //         var errorMessage = error.message;\r\n            //         // The email of the user's account used.\r\n            //         var email = error.email;\r\n            //         // The firebase.auth.AuthCredential type that was used.\r\n            //         var credential = error.credential;\r\n            //         console.log(\"errorMessage\", errorMessage);\r\n            //         // ...\r\n            //     });\r\n        }\r\n    }\r\n\r\n    const signoutUser = async () => {\r\n        firebase.auth().signOut().then(() => {\r\n            console.log(\"signout succuss\");\r\n            // Sign-out successful.\r\n        }).catch((error) => {\r\n            // An error happened.\r\n            console.log(\"signout fail\");\r\n        });\r\n    }\r\n\r\n    return (\r\n        <Pressable style={styles.root} onPress={() => Keyboard.dismiss()}>\r\n            <View style={styles.inputContainer}>\r\n                <Text style={styles.title}>Login/Sign Up</Text>\r\n                <TextInput placeholder='Email' onChangeText={text => setEmail(text)} keyboardType=\"email-address\" style={styles.inputText} autoCapitalize='none' ></TextInput>\r\n                <TextInput placeholder='Password' onChangeText={text => setPassword(text)} secureTextEntry={true} style={styles.inputText} autoCapitalize='none'></TextInput>\r\n\r\n                <TouchableOpacity onPress={loginHandler} style={styles.BtnLogin} >\r\n                    <Text>Login</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={signupHandler} style={{ ...styles.BtnLogin, backgroundColor: '#e9ecef' }}>\r\n                    <Text>Sign up</Text>\r\n                </TouchableOpacity>\r\n                <TouchableOpacity onPress={facebookLoginHandler} style={{ ...styles.BtnLogin, backgroundColor: '#3b5998', }} >\r\n                    <Text style={{ color: 'white' }}>Sign in with Facebook</Text>\r\n                </TouchableOpacity>\r\n\r\n            </View>\r\n        </Pressable>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    root: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: Colors.primary\r\n    },\r\n    inputContainer: {\r\n        width: '80%',\r\n        height: '60%',\r\n        alignContent: 'center',\r\n        alignSelf: 'center',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        borderWidth: 2,\r\n        borderRadius: 10,\r\n        borderColor: Colors.lightGray,\r\n        backgroundColor: Colors.lightGray\r\n\r\n    },\r\n    title: {\r\n        // height: 100,\r\n        fontSize: 20,\r\n        padding: 4,\r\n        marginBottom: 30,\r\n        fontWeight:'bold',\r\n    },\r\n    inputText: {\r\n        width: '85%',\r\n        height: 40,\r\n        backgroundColor: Colors.white,\r\n        borderRadius: 20,\r\n        margin: 5,\r\n        textAlign: 'center'\r\n    },\r\n    BtnLogin: {\r\n        width: '60%',\r\n        padding: 8,\r\n        borderRadius: 8,\r\n        borderWidth: 1,\r\n        borderColor: Colors.lightGray,\r\n        alignItems:'center',\r\n        // backgroundColor: '#e8eddf',\r\n        backgroundColor: Colors.offright,\r\n        margin: 3,\r\n    },\r\n    \r\n});\r\n\r\nexport default LoginScreen;"]},"metadata":{},"sourceType":"module"}